{% extends 'base.html' %}
{% block content %}
<div class="container mt-5" style="max-width: 500px;">
    <h3 class="mb-4">Đổi mật khẩu</h3>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="mb-3 position-relative">
            {{ form.old_password.label(class="form-label fw-bold") }}
            <div class="input-group">
                {{ form.old_password(class="form-control", type="password", placeholder="Nhập mật khẩu cũ", id="old-password") }}
                <button type="button" class="btn btn-outline-secondary toggle-password" data-target="#old-password" tabindex="-1"><i class="fas fa-eye"></i></button>
            </div>
            {% for error in form.old_password.errors %}<span class="text-danger">{{ error }}</span>{% endfor %}
        </div>
        <div class="mb-3 position-relative">
            {{ form.new_password.label(class="form-label fw-bold") }}
            <div class="input-group">
                {{ form.new_password(class="form-control", type="password", placeholder="Nhập mật khẩu mới", id="new-password") }}
                <button type="button" class="btn btn-outline-secondary toggle-password" data-target="#new-password" tabindex="-1"><i class="fas fa-eye"></i></button>
            </div>
            {% for error in form.new_password.errors %}<span class="text-danger">{{ error }}</span>{% endfor %}
        </div>
        <div class="mb-3 position-relative">
            {{ form.confirm_new_password.label(class="form-label fw-bold") }}
            <div class="input-group">
                {{ form.confirm_new_password(class="form-control", type="password", placeholder="Xác nhận mật khẩu mới", id="confirm-new-password") }}
                <button type="button" class="btn btn-outline-secondary toggle-password" data-target="#confirm-new-password" tabindex="-1"><i class="fas fa-eye"></i></button>
            </div>
            {% for error in form.confirm_new_password.errors %}<span class="text-danger">{{ error }}</span>{% endfor %}
        </div>
        <button type="submit" class="btn btn-primary">Đổi mật khẩu</button>
    </form>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.toggle-password').forEach(function(btn) {
            btn.addEventListener('click', function() {
                const input = document.querySelector(this.getAttribute('data-target'));
                if (input.type === 'password') {
                    input.type = 'text';
                    this.innerHTML = '<i class="fas fa-eye-slash"></i>';
                } else {
                    input.type = 'password';
                    this.innerHTML = '<i class="fas fa-eye"></i>';
                }
            });
        });
    });
    </script>
</div>
{% endblock %} 